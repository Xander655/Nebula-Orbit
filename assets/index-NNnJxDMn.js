import{r as c,j as e,i as y,e as b}from"./index-BywRmEZZ.js";function j({placeholder:m="Search...",onSearch:a,delay:n=300,minLength:o=0,className:d=""}){const[r,l]=c.useState("");return c.useEffect(()=>{const t=r.trim(),p=setTimeout(()=>{(t.length>=o||t.length===0)&&a(t)},n);return()=>clearTimeout(p)},[r,n,o,a]),e.jsxs("div",{className:`relative w-full ${d}`,children:[e.jsx("input",{type:"search",value:r,placeholder:m,onChange:t=>l(t.target.value),className:"border px-3 py-2 pr-8 w-full rounded","aria-label":"Search"}),r&&e.jsx("button",{onClick:()=>l(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600","aria-label":"Clear search",children:"✕"})]})}const N=function(){const[a,n]=c.useState(1),[o,d]=c.useState(""),r=20,l=y({queryKey:["employees",a,o],queryFn:async()=>{const s=await b();if(!s)throw new Error("No access token");const i=new URL("https://sit.nebula.psi.edu/api/employee");i.searchParams.append("PageNumber",a.toString()),i.searchParams.append("PageSize",r.toString()),o&&i.searchParams.append("Email",o);const h=await fetch(i.toString(),{headers:{Authorization:`Bearer ${s}`}});if(!h.ok)throw new Error(`Error ${h.status}`);return h.json()},placeholderData:s=>s}),{data:t,isLoading:p,error:x,isFetching:g}=l,u=t??[];return e.jsxs("div",{className:"p-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Employees"}),e.jsx(j,{placeholder:"Search by email...",onSearch:s=>{n(1),d(s)}}),p?e.jsx("div",{children:"Loading..."}):x?e.jsx("div",{className:"text-red-500",children:"Error loading employees"}):u.length===0?e.jsx("div",{children:"No employees found."}):e.jsx("ul",{className:"space-y-1 mb-4",children:u.map(s=>e.jsxs("li",{children:[e.jsx("strong",{children:s.fullName})," – ",s.email]},s.employeeGuid))}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{disabled:a===1,onClick:()=>n(s=>Math.max(s-1,1)),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Previous"}),e.jsxs("span",{children:["Page ",a," ",g&&"..."]}),e.jsx("button",{disabled:u.length<r,onClick:()=>n(s=>s+1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})};export{N as component};
